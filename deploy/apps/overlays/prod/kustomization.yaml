apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

generatorOptions:
  disableNameSuffixHash: true

resources:
  - ../../base
namespace: default

images:
  - name: wordpress
    newName: amedeopalopoli/devsecopsdemo2025-kaas
    newTag: latest

configMapGenerator:
  - name: wordpress-apache-conf
    literals:
      - servername.conf=ServerName devsecops2025-arubacloud.com
  - name: wordpress-mu-plugins
    files:
      - 00-canonical-urls.php=./mu-plugins/00-canonical-urls.php
  - name: cronjob-env
    literals:
      - WORDPRESS_CRON_URL=https://devsecops2025-arubacloud.com/wp-cron.php
patches:
  - path: deployment-patch.yaml
  - path: ingress-patch.yaml
